  <% @posts.reverse.each do |post| %>

    <div class="container-fluid">

      <div class="row">
        <div class="col-sm-6 above-pic"><strong>@<%= post.user.email.split('@')[0] %>: </strong><%= post.caption %></div>
        <div class="col-sm-6 text-right above-pic"><strong>Written: </strong><%= post.created_at %></div>
      </div>
        <div class="text-center image"><%= image_tag post.image_url(:thumb).to_s %></div>

        <%= link_to like_post_path(post), method: :put do %>
          Upvote
          <%= post.get_upvotes.size %>
        <% end %>

        <%= link_to dislike_post_path(post), method: :put do %>
          Downvote
          <%= post.get_downvotes.size %>
        <% end %>

      <div class="comments">
        <% post.comments.each do |comment| %>
          <p><strong>@<%= comment.user.email.split('@')[0] %>: </strong><%= comment.body %></p>
        <% end %>
      </div>
        <% if current_user %>
          <div onmouseenter="toggleCommentForm(this.id)" id='<%= post.id %>'>
            <p>Leave a comment</p>
            <div class="comment-form"  id='commentForm<%= post.id %>'>
              <%= form_with(model: [post, post.comments.build], local: true) do |form| %>
                <p>
                  <%= form.label :body %>
                  <%= form.text_field :body %>
                  <%= form.hidden_field :post_id, value: post.id %>
                  <%= form.hidden_field :user_id, value: current_user.id %>
                </p>
                <%= form.submit %>
              <% end %>
            </div>
          </div>
        <% end %>

      <p><%= link_to 'Show', post_path(post) %></p>
      <p><%= link_to 'Edit', edit_post_path(post) %></p>
      <p><%= link_to 'Destroy', post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %></p>

    </div>

  <% end %>
